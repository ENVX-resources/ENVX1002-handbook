{
  "hash": "aa440aa6b2699cf7257fbccb62edc8fe",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Lab 02 -- Statistical programming\nembed-resources: false\nresources:\n  - data/soil.xlsx\n---\n\n\n\n\n\n\n::: {.callout-tip}\n## Learning Outcomes\n\nAt the end of this practical students should be able to:\n\n- Acknowledge the importance of academic integrity\n- Import, subset and inspect data in R\n- Calculate simple summary statistics using both R and Excel\n- Generate dynamic reports in Quarto using inline R code\n- Write equations in both Quarto and MS Word\n- understand how to debug R code\n:::\n\n## Before we begin\nPlease create a new Quarto document in your project folder to practice R code and complete lab exercises. We will go through the process in Exercise 1.\n\nThe following packages are required for this practical:\n\n- `pacman` -- a package for managing the loading of other packages (among other awesome features)\n-`tidyverse` -- a collection of R packages designed for data science\n- `readxl` -- a package for reading Excel files\n- `modeest` -- a package for estimating the mode of a distribution\n\nIf you have not already installed these packages, you can do so by adding the following code into a code chunk in your Quarto document:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(tidyverse, readxl, modeest)\n```\n:::\n\n\n\n\nFinally, please download the data file used in this lab here: [soil.xlsx](data/soil.xlsx).\n\n## Academic integrity\n\nThis exercise encourages students to discuss academic integrity, and in particular the grey areas often present. Your demonstrator will provide you with a number of scenarios to discuss with each other in smaller groups, and then with the class. \n\nIf you are interested in more information on Academic Integrity at the University of Sydney, see the following link: [Academic Integrity](https://www.sydney.edu.au/students/academic-integrity.html). Also ensure you have completed the Academic Honesty Education Module (AHEM). This must be complete before your first assessment is due (next week for ENVX1002). \n\n## Exercise 1: Setting up\n\nToday we will go through the process of getting into your RStudio project for labs and set up a new Quarto document. Follow these steps carefully (we will not provide these instructions in future labs):\n\n1. **Open RStudio Project**\n   - Locate your RStudio project file (`.Rproj`) in your lab folder\n   - Either:\n     a. Open RStudio and use File > Open Project to navigate to your `.Rproj` file\n     b. Double-click the `.Rproj` file directly from your file explorer\n\n::: {.column-margin}\nYour project name should appear in the top-right corner of RStudio.\n:::\n\n2. **Create a New Quarto Document**\n   - Several ways to do it, the easiest is by clicking the \"New File\" button in the toolbar and selecting \"Quarto Document...\"\n   - Give your document a meaningful name (e.g., `Lab 2 Exercises`), leave other options as default and click \"Create\"\n\n3. **Save and Render Your Document**\n  - Click File > Save or press Ctrl+S (Windows) / Cmd+S (Mac)\n  - Name it something meaningful like `lab02_practice.qmd`\n  - Click the \"Render\" button in the editor toolbar to generate the HTML output\n\n::: {.callout-note}\nIf you encounter any issues, please ask your demonstrator for help.\n:::\n\n## Exercise 2: water quality\n\nSulphate (SO~4~) is a key indicator in water quality monitoring, used to assess environmental impacts from industry and agriculture. Let's analyse a small dataset of water quality data to practice some basic statistical calculations in R.\n\nThe data is stored in a sheet called \"SO4\" in the MS Excel file, `soil.xlsx`.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nso4 <- read_excel(\"data/soil.xlsx\", sheet = \"SO4\")\n```\n:::\n\n\n\n\n\n::: {.column-margin}\nTry writing and running the code chunks in your own Quarto document to see their outputs. Results will appear below each chunk. See Lab 01 for more information on inserting and running code chunks in Quarto.\n:::\n\nWhen we load data into R for the first time, it is important to check what it looks like (and whether it loaded correctly). The `str()` function is a good way to quickly inspect the data:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(so4)\n```\n:::\n\n\n\n\n**What does the output of `str()` tell us about the data?** You may want to look at the documentation `?str` or search online for more information, but ask your demonstrator if you're still unsure about why we use this function.\n\nSince the data is a data frame object, we have a good idea of what functions we can use to explore it.\nLet's examine the first few rows of our data:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(so4)\n```\n:::\n\n\n\n\n\nLet's calculate some basic descriptive statistics:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate mean, median, and mode\nmean_so4 <- mean(so4$SO4)\nmedian_so4 <- median(so4$SO4)\nmode_so4 <- mfv(so4$SO4)[1] # Most frequent value using modeest package\n\n# Calculate measures of spread\nrange_so4 <- range(so4$SO4)\niqr_so4 <- IQR(so4$SO4)\nvar_so4 <- var(so4$SO4)\nsd_so4 <- sd(so4$SO4)\n```\n:::\n\n\n\nWhen reporting statistics in a scientific document, there are two approaches we could take:\n\n#### 1. Basic R output (not recommended):\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean_so4\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 61.92308\n```\n\n\n:::\n\n```{.r .cell-code}\nsd_so4\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 5.241558\n```\n\n\n:::\n\n```{.r .cell-code}\nmedian_so4\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 62.1\n```\n\n\n:::\n:::\n\n\n\n\n#### 2. Inline reporting (recommended):\n\nConsider the following report:\n\n> The mean SO~4~ concentration in our samples is 61.92 mg/kg, with a standard deviation of 5.24 mg/kg. The median value is 62.1 mg/kg.\n\nUsing inline R code (approach 2) has several advantages:\n\n- Statistics are seamlessly integrated into your text\n- Numbers are automatically updated if your data changes\n- Results are presented in a reader-friendly format\n\nTo create inline R code, use backticks with r, like this:\n\n```\nThe mean SO~4~ concentration in our samples is 61.92 mg/kg\n```\n**Try to recreate the report above in your Quarto document.**\n\n\n\n## Exercise 3: using MS Excel\n\n:::{.column-margin}\nMS Excel remains a popular tool for quick and dirty data analysis and can be a valuable resource in just about any field.\n:::\n\nLet's compare how to calculate basic statistics in Excel. First, open the `soil.xlsx` file in Excel and navigate to the \"SO4\" sheet.\n\n![Imported data in Excel.](images/excel-data.png)\n\n\nFor any calculation in Excel:\n\n1. Select an empty cell\n2. Type \"=\" followed by the function name\n3. Select your data range\n4. Press Enter\n\nFor example, to calculate the mean:\n\n1. Click an empty cell\n2. Type \"=AVERAGE(\"\n3. Select all SO4 values\n4. Type \")\" and press Enter\n\n\n\n\nCalculate these statistics in Excel:\n\n- For central tendency:\n  - Mean: Use `=AVERAGE()`\n  - Median: Use `=MEDIAN()`\n  - Mode: Use `=MODE()`\n\n\n\n![Using the `=AVERAGE()` formula in Excel. Note that this screenshot demonstrates the selection of a specific range of data.](images/excel-mean-formula.png)\n\n\n- For spread:\n  - Range: Use `=MAX()` and `=MIN()`\n  - IQR: Use `=QUARTILE.INC()` for Q3 and Q1\n  - Variance: Use `=VAR.S()`\n  - Standard Deviation: Use `=STDEV.S()`\n\nWrite notes on how you used these formulas if necessary. You may also want to compare the results with those obtained in R and write down your thoughts on the efficiency and ease of use for each method.\n\n\n## Exercise 4: a larger dataset on soil\n\nIn agricultural science, soil characteristics are essential for understanding soil health and fertility. The `soil` sheet in the `soil.xlsx` file contains data on soil properties at different depths, as well as lithology and land use information.\n\nIn this exercise, we'll explore different ways to subset data in R using the soil characteristics data. First, let's load the data:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsoil <- read_excel(\"data/soil.xlsx\", sheet = \"soil\")\n```\n:::\n\n\n\n\n### Understanding data structure\nLet's examine our data structure:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(soil)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ntibble [55 × 7] (S3: tbl_df/tbl/data.frame)\n $ id       : chr [1:55] \"AT1\" \"AT2\" \"AT3\" \"BM1\" ...\n $ clay0    : num [1:55] 21.26 21.43 4.52 19.37 40.64 ...\n $ clay60   : num [1:55] 30.4 38.2 42.6 24.6 75.6 ...\n $ ec0      : num [1:55] 52.4 34.9 52.8 35.1 46.4 ...\n $ ec60     : num [1:55] 32.6 25.1 38.5 26.4 35.2 ...\n $ lithology: chr [1:55] \"Siliceous Mid\" \"Siliceous Mid\" \"Siliceous Lower\" \"Siliceous Lower\" ...\n $ land_use : chr [1:55] \"Grazing\" \"Grazing\" \"Grazing\" \"Grazing\" ...\n```\n\n\n:::\n\n```{.r .cell-code}\nhead(soil)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 7\n  id    clay0 clay60   ec0  ec60 lithology       land_use\n  <chr> <dbl>  <dbl> <dbl> <dbl> <chr>           <chr>   \n1 AT1   21.3    30.4  52.4  32.6 Siliceous Mid   Grazing \n2 AT2   21.4    38.2  34.8  25.1 Siliceous Mid   Grazing \n3 AT3    4.52   42.6  52.8  38.5 Siliceous Lower Grazing \n4 BM1   19.4    24.6  35.2  26.4 Siliceous Lower Grazing \n5 BM2   40.6    75.6  46.4  35.2 Mafic           Grazing \n6 BM3   42.7    75.1  50.0  59.7 Mafic           Grazing \n```\n\n\n:::\n:::\n\n\n\n\n**Question: What do you notice about the data structure that is different from the SO~4~ data?**\n\n### Basic subsetting in R\n\nThere are two main ways to subset data in R:\n\n1. Using the `$` operator to select columns\n2. Using square brackets `[]` to select rows and columns\n\n#### Using the $ operator\nThe `$` operator allows us to select a specific column from our data frame. For example:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get the land use column\nsoil$land_use\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Grazing\" \n [7] \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Grazing\" \n[13] \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Grazing\" \n[19] \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Cropping\" \"Cropping\"\n[25] \"Cropping\" \"Cropping\" \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Grazing\" \n[31] \"Grazing\"  \"Grazing\"  \"Cropping\" \"Cropping\" \"Cropping\" \"Grazing\" \n[37] \"Cropping\" \"Grazing\"  \"Grazing\"  \"Grazing\"  \"Cropping\" \"Grazing\" \n[43] \"Grazing\"  \"Grazing\"  \"Cropping\" \"Grazing\"  \"Grazing\"  \"Grazing\" \n[49] \"Grazing\"  \"Grazing\"  \"Natural\"  \"Natural\"  \"Grazing\"  \"Cropping\"\n[55] \"Cropping\"\n```\n\n\n:::\n\n```{.r .cell-code}\n# Calculate the mean clay content at 60 cm depth\nmean(soil$clay60)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] NA\n```\n\n\n:::\n:::\n\n\n\n\n::: {.callout-note}\nThe `$` operator is particularly useful when you want to:\n\n- Access a single column quickly\n- Use column values in calculations\n- Create plots with specific variables\n:::\n\n#### Using square brackets []\nSquare brackets allow more flexible subsetting using the format: `dataframe[rows, columns]`\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# First 5 rows, all columns\nsoil[1:5, ]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 7\n  id    clay0 clay60   ec0  ec60 lithology       land_use\n  <chr> <dbl>  <dbl> <dbl> <dbl> <chr>           <chr>   \n1 AT1   21.3    30.4  52.4  32.6 Siliceous Mid   Grazing \n2 AT2   21.4    38.2  34.8  25.1 Siliceous Mid   Grazing \n3 AT3    4.52   42.6  52.8  38.5 Siliceous Lower Grazing \n4 BM1   19.4    24.6  35.2  26.4 Siliceous Lower Grazing \n5 BM2   40.6    75.6  46.4  35.2 Mafic           Grazing \n```\n\n\n:::\n\n```{.r .cell-code}\n# Clay columns\nsoil[, c(\"clay0\", \"clay60\")]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 55 × 2\n   clay0 clay60\n   <dbl>  <dbl>\n 1 21.3    30.4\n 2 21.4    38.2\n 3  4.52   42.6\n 4 19.4    24.6\n 5 40.6    75.6\n 6 42.7    75.1\n 7 28.1    50.5\n 8 41.3    72.6\n 9 48.7    78.7\n10 26.3    50.5\n# ℹ 45 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\n# First 3 rows, electrical conductivity columns\nsoil[1:3, c(\"ec0\", \"ec60\")]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 2\n    ec0  ec60\n  <dbl> <dbl>\n1  52.4  32.6\n2  34.8  25.1\n3  52.8  38.5\n```\n\n\n:::\n:::\n\n\n\n\n### Practice\n\n1. Using the `$` operator:\n   - Extract all EC (Electrical Conductivity) values\n   - Calculate the mean EC\n   \n2. Using square brackets:\n   - Select rows 10-15 of the dataset\n   - Extract pH values for samples 5-10\n   - Create a subset containing only pH and OC (Organic Carbon) columns\n\n3. Challenge: Create a subset that contains:\n   - Only samples where pH is greater than 7\n   - Only the pH and EC columns\n   \n::: {.callout-tip}\nRemember: \n- When using `[]`, leaving the row or column section empty (with just a comma) means \"select all\"\n- You can use logical conditions inside `[]` to filter data\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}