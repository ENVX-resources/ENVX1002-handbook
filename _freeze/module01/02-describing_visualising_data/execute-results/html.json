{
  "hash": "126158b10c2f0de86182346625e0ab22",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Describing and Visualising Data\ndraft: true\n---\n\n\n\n\n\n\n\n## Overview\n\nThis chapter introduces fundamental data visualisation techniques using the grammar of graphics approach through `ggplot2`. We'll use real ecological data to create and customise informative plots while building on the statistical concepts from the previous chapter.\n\n## Data Introduction\n\nWe'll work with two datasets from the Long Term Ecological Research (LTER) Network:\n\n1. **Fiddler Crabs** (`pie_crab`): Body size measurements of fiddler crabs, collected to study population characteristics.\n2. **Sugar Maples** (`hbr_maples`): Tree growth measurements under different environmental conditions.\n\n## Grammar of Graphics with ggplot2\n\nThe `ggplot2` package uses a layered approach to building plots:\n1. Data: The dataset we're visualising\n2. Aesthetics: How variables map to visual elements\n3. Geometries: The type of plot we want to create\n4. Additional layers: Labels, themes, and customisation\n\n## Core Plot Types\n\n### Histograms: Understanding Distributions\n\nLet's examine the distribution of crab carapace widths:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Basic histogram\nggplot(pie_crab, aes(x = size)) +\n  geom_histogram(bins = 30) +\n  labs(\n    x = \"Carapace Width (mm)\",\n    y = \"Count\",\n    title = \"Distribution of Fiddler Crab Sizes\"\n  )\n```\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Add mean line to connect with previous chapter\nggplot(pie_crab, aes(x = size)) +\n  geom_histogram(bins = 30) +\n  geom_vline(aes(xintercept = mean(size, na.rm = TRUE)),\n    color = \"red\", linetype = \"dashed\"\n  ) +\n  labs(\n    x = \"Carapace Width (mm)\",\n    y = \"Count\",\n    title = \"Fiddler Crab Sizes with Mean\"\n  )\n```\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-1-2.png){width=672}\n:::\n:::\n\n\n\n\n\n### Boxplots: Visualising Summary Statistics\n\nBoxplots directly show the summary statistics we learned previously:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Basic boxplot\nggplot(pie_crab, aes(x = site, y = size)) +\n  geom_boxplot() +\n  labs(\n    x = \"Site\",\n    y = \"Carapace Width (mm)\",\n    title = \"Fiddler Crab Sizes by Site\"\n  )\n```\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Compare sites with different colors\nggplot(pie_crab, aes(x = site, y = size, fill = site)) +\n  geom_boxplot() +\n  labs(\n    x = \"Site\",\n    y = \"Carapace Width (mm)\",\n    title = \"Fiddler Crab Sizes by Site\"\n  )\n```\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-2-2.png){width=672}\n:::\n:::\n\n\n\n\n\n### Bar Plots: Summarising Groups\n\nLet's look at crab counts across sites:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Simple count\nggplot(pie_crab, aes(x = site)) +\n  geom_bar() +\n  labs(\n    x = \"Site\",\n    y = \"Count\",\n    title = \"Number of Crabs per Site\"\n  )\n```\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Mean size by site with error bars\npie_crab %>%\n  group_by(site) %>%\n  summarise(\n    mean_width = mean(size, na.rm = TRUE),\n    se = sd(size, na.rm = TRUE) / sqrt(n())\n  ) %>%\n  ggplot(aes(x = site, y = mean_width)) +\n  geom_col() +\n  geom_errorbar(\n    aes(\n      ymin = mean_width - se,\n      ymax = mean_width + se\n    ),\n    width = 0.2\n  ) +\n  labs(\n    x = \"Site\",\n    y = \"Mean Carapace Width (mm)\",\n    title = \"Average Crab Size by Site\"\n  )\n```\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n:::\n\n\n\n\n\n### Scatterplots: Exploring Relationships\n\nExamine maple growth patterns:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Basic scatterplot\nggplot(hbr_maples, aes(x = year, y = stem_length)) +\n  geom_point() +\n  labs(\n    x = \"Year\",\n    y = \"Stem Length (cm)\",\n    title = \"Sugar Maple Growth Over Time\"\n  )\n```\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Add trend line and group by treatment\nggplot(hbr_maples, aes(\n  x = year, y = stem_length,\n  color = watershed\n)) +\n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  labs(\n    x = \"Year\",\n    y = \"Stem Length (cm)\",\n    title = \"Sugar Maple Growth by Watershed\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n:::\n\n\n\n\n\n## Essential Plot Modifications\n\n### Clear Labels and Titles\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pie_crab, aes(x = site, y = size)) +\n  geom_boxplot() +\n  labs(\n    x = \"Collection Site\",\n    y = \"Carapace Width (mm)\",\n    title = \"Fiddler Crab Size Distribution\",\n    subtitle = \"Comparing sizes across collection sites\",\n    caption = \"Data: PIE LTER\"\n  )\n```\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n\n\n### Appropriate Colours\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Using colour-blind friendly palette\nggplot(pie_crab, aes(\n  x = site, y = size,\n  fill = site\n)) +\n  geom_boxplot() +\n  scale_fill_brewer(palette = \"Set2\") +\n  labs(\n    x = \"Collection Site\",\n    y = \"Carapace Width (mm)\",\n    title = \"Fiddler Crab Sizes by Site (with colour)\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set2 is 8\nReturning the palette you asked for with that many colors\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n\n\n### Scale Adjustments\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Adjust axis limits and breaks\nggplot(hbr_maples, aes(\n  x = year, y = stem_length,\n  color = watershed\n)) +\n  geom_point() +\n  scale_y_continuous(\n    limits = c(0, max(hbr_maples$stem_length, na.rm = TRUE)),\n    breaks = seq(0, max(hbr_maples$stem_length, na.rm = TRUE), by = 50)\n  ) +\n  labs(\n    x = \"Year\",\n    y = \"Stem Length (cm)\"\n  )\n```\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n\n\n### Theme Customisation\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Using minimal theme with customisation\nggplot(pie_crab, aes(x = site, y = size)) +\n  geom_boxplot() +\n  labs(\n    x = \"Collection Site\",\n    y = \"Carapace Width (mm)\",\n    title = \"Fiddler Crab Size Distribution\"\n  ) +\n  theme_minimal() +\n  theme(\n    axis.text = element_text(size = 10),\n    axis.title = element_text(size = 12),\n    plot.title = element_text(size = 14, face = \"bold\"),\n    legend.position = \"bottom\"\n  )\n```\n\n::: {.cell-output-display}\n![](02-describing_visualising_data_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## Summary\n\nWe've learned how to:\n- Create four fundamental plot types using `ggplot2`\n- Connect visualisations to statistical concepts\n- Customise plots for clarity and impact\n- Present ecological data effectively\n\nThese visualisation skills help us communicate patterns and relationships in biological data.\n",
    "supporting": [
      "02-describing_visualising_data_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}